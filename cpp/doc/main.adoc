:levelToBaseDir: ..
:levelToDocDir: .
//:toc:
//:toc-placement: left
//:toclevels: 4
:showtitle:

= OpenSCENARIO API - Documentation

== Building the binaries
In this document we focus on building the OpenSCENARIO binaries from the C++ source code using `cmake` and `cmake-gui`.
A great starting point for more information on `cmake` is its main site http://https://cmake.org/overview/[cmake website].

=== System requirements
In order to build OpenSCENARIO on your system the following requirements have to be fulfilled:

==== Linux
* cmake >= 3.19 (must include cmake-gui)
* gcc >= 5.8
* uuid-dev >= 2.34 (required to build antlr4), to install uuid-dev execute this shell command:
```bash
$ sudo apt install uuid-dev
```

* a working copy of the OpenSCENARIO sources

==== Windows
* cmake >= 3.19 (must include cmake-gui)
* Visual Studio 2015 or better (2022 is supported, too)
* a working copy of the OpenSCENARIO sources

== Building on Windows with Visual Studio
Start the `cmake-gui` application and a similar window like the one shown below will show up:

image:images/oscCgWin0.png[cmake_gui,width=720,float="center",align="center"]

Now follow the steps below to let cmake create a Visual Studio solution for the OpenSCENARIO source tree:

* Click on "Browse Source...", located on the top right of the cmake-gui window.
* Navigate to the location of your OpenScenario source directory and select the directory `cpp` and click ok.
* Next click on the "Presets" dropdownbox labeled "<custom>" and select your build environment. In the example shown below "VS2019 x64 shared" is chosen. That means the solution will be build for Visual Studio 2019, creating 64 Bit binaries, and required libraries are linked dynamically during runtime.

image:images/oscCgWin1_2.png[cmake_gui,width=720,float="center",align="center"]

* Now click "Configure", located in the middle left of the cmake-gui window. An output as shown in the image below will be generated.

image:images/oscCgWin2.png[cmake_gui,width=720,float="center",align="center"]

[NOTE]
====
All the red lines in the output section are cmake warnings generated by the antlr4 project.
====

* Next click the button "Generate", just right of "Configure". If cmake successfully created the solution the line "Generating done" will be added at the end of the output and the button "Open Project" will be enabled.
* Finally click on the "Open Project" button to bring up your selected Visual Studio. There you can debug, extend, and build OpenSCENARIO sources.


== Building on Linux with make
The building steps on Linux are almost the same as the ones for the Windows platform.
Start the `cmake-gui` application and a similar window like the one shown below will show up:

image:images/oscCgLin0.png[cmake_gui,width=720,float="center",align="center"]

Now follow the steps below to let cmake create a Makefile project for the OpenSCENARIO source tree:

* Click on "Browse Source...", located on the top right of the cmake-gui window.
* Navigate to the location of your OpenScenario source directory and select the directory `cpp` and click ok.
* Next click on the "Presets" dropdownbox labeled "<custom>" and select your build environment. In the example shown above "Linux shared release" is chosen. That means cmake will create a Makefile project using gcc / g++ as compilers, creating 64 Bit binaries, and required libraries are linked dynamically during runtime.
* Now click "Configure", located in the middle left of the cmake-gui window. An output as shown in the image will be generated.

image:images/oscCgLin1.png[cmake_gui,width=720,float="center",align="center"]

[NOTE]
====
All the red lines in the output section are cmake warnings generated by the antlr4 project.
====

* Next click the button "Generate", just right of "Configure". If cmake successfully created the Makefiles project the line "Generating done" will be added at the end of the output. This time the button "Open Project" stays disable as we just created Makefiles projects and not an IDE solution.
* Finally open a terminal window and navigate to your OpenSCENARIO install directory. For our example the default would be to go to the directory `<your osc base dir>/cpp/build/cgReleaseMakeShared`. Type make to build the OpenScenario binaries.